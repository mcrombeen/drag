<!DOCTYPE html>
<html>
  <head>
    <style>
      .canvas {
        width: 100%;
        height: 100%;
        background-color: #ddd;
        position: absolute;
      }
      
      .images {
        width: 100px;
        height: 100px;
        position: absolute;
      }
    </style>
  </head>
  <body>
    <div class="canvas">
      <img class="images" src="https://raw.githubusercontent.com/mcrombeen/css/main/hounted_house.png">
      <img class="images" src="https://raw.githubusercontent.com/mcrombeen/css/main/hounted_house.png">
      <img class="images" src="https://raw.githubusercontent.com/mcrombeen/css/main/hounted_house.png">
    </div>

    <script>
      const images = document.querySelectorAll(".images");

      let zIndexCounter = 1;

      images.forEach((image) => {
        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;
        let xOffset = 0;
        let yOffset = 0;

        image.addEventListener("mousedown", dragStart);
        image.addEventListener("mouseup", dragEnd);
        image.addEventListener("mouseout", dragEnd);
        image.addEventListener("mousemove", drag);

        function dragStart(e) {
          if (isDragging) return;

          initialX = e.clientX - xOffset;
          initialY = e.clientY - yOffset;

          isDragging = true;
        }

        function dragEnd(e) {
          isDragging = false;
        }

        function drag(e) {
          if (isDragging) {
            e.preventDefault();
            currentX = e.clientX - initialX;
            currentY = e.clientY - initialY;

            xOffset = currentX;
            yOffset = currentY;

            setTranslate(currentX, currentY, image);
          }
        }

        function setTranslate(xPos, yPos, el) {
          el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
        }
      });

      images.forEach((image) => {
        image.addEventListener("mousedown", () => {
          image.style.zIndex = zIndexCounter++;
        });
      });
    </script>
  </body>
</html>
